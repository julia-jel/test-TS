////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//  Copyright (C) 2008 Quantron Systems LLC.
//  All Rights Reserved.
//
//  This file is part of the private project.
//  For conditions of distribution and use,
//  please contact sales@quantron-systems.com
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

import path from 'path';
import express from 'express';
import compression from 'compression';
import logger from './src/common/logger';
import settings from './src/common/settings';

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
const app = express();
app.use(compression({}));
app.disable('x-powered-by');

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
const staticPath = path.join(__dirname, 'build');
const port = settings.get().WWW_PORT || 8080;

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
app.use(express.static(staticPath, {maxAge: '365 days'}));

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
app.listen(port, error => {
    if(error) {
        console.error(error);
        return process.exit(-1);
    }
    logger.info('Server started on http://localhost:' + port + '.');
});

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

